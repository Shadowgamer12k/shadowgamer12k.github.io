<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Minecraft 16×16 Blur + BG Remove</title>
<style>
  body {
    background: #0b1020;
    color: #e5e7eb;
    font-family: Arial, sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }
  .box {
    background: #020617;
    padding: 20px;
    border-radius: 10px;
    width: 360px;
    text-align: center;
  }
  canvas {
    border: 1px solid #334155;
    margin-top: 12px;
  }
  button, input {
    margin-top: 10px;
    width: 100%;
  }
  button {
    background: #2563eb;
    border: none;
    padding: 8px;
    color: white;
    border-radius: 6px;
    cursor: pointer;
  }
</style>
</head>
<body>

<div class="box">
  <h3>16×16 Minecraft Tool</h3>
  <p style="font-size:12px">Blur + Background Removal</p>
  <input type="file" id="upload" accept="image/*">
  <canvas id="canvas" width="16" height="16"></canvas>
  <button id="download">Download 16×16 PNG</button>
</div>

<script>
const upload = document.getElementById("upload");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

ctx.imageSmoothingEnabled = true;
ctx.imageSmoothingQuality = "high";

upload.addEventListener("change", () => {
  const file = upload.files[0];
  if (!file) return;

  const img = new Image();
  img.onload = () => {

    // Temp canvas for background removal
    const temp = document.createElement("canvas");
    temp.width = img.width;
    temp.height = img.height;
    const tctx = temp.getContext("2d");
    tctx.drawImage(img, 0, 0);

    const data = tctx.getImageData(0, 0, temp.width, temp.height);
    const pixels = data.data;

    // BACKGROUND REMOVAL (light colors)
    for (let i = 0; i < pixels.length; i += 4) {
      const r = pixels[i];
      const g = pixels[i + 1];
      const b = pixels[i + 2];

      // If pixel is close to white / light gray → remove
      if (r > 220 && g > 220 && b > 220) {
        pixels[i + 3] = 0;
      }
    }

    tctx.putImageData(data, 0, 0);

    // Draw to final 16x16 canvas
    ctx.clearRect(0, 0, 16, 16);

    const scale = Math.min(16 / temp.width, 16 / temp.height);
    const w = temp.width * scale;
    const h = temp.height * scale;
    const x = (16 - w) / 2;
    const y = (16 - h) / 2;

    ctx.drawImage(temp, x, y, w, h);
  };

  img.src = URL.createObjectURL(file);
});

document.getElementById("download").onclick = () => {
  const a = document.createElement("a");
  a.download = "minecraft_item_16x16.png";
  a.href = canvas.toDataURL("image/png");
  a.click();
};
</script>

</body>
</html>
